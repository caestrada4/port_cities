<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="project.menu_main_pm" model="ir.ui.menu">
    <field name="name">Site</field>
  </record>

  <record id="project.menu_projects" model="ir.ui.menu">
    <field name="name">Sites</field>
  </record>

  <record id="project_project_form_footer_rename_site" model="ir.ui.view">
    <field name="name">project.project.form.simplified.footer.rename.site</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.project_project_view_form_simplified_footer" />
    <field name="arch" type="xml">
      <xpath expr="//button[@name='action_view_tasks']" position="attributes">
        <attribute name="string">Create Site</attribute>
      </xpath>
    </field>
  </record>

  <record id="view_project_form_rename_to_site" model="ir.ui.view">
    <field name="name">project.project.form.rename.site</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.edit_project" />
    <field name="arch" type="xml">

      <xpath expr="//form" position="attributes">
        <attribute name="string">Site</attribute>
      </xpath>

      <xpath expr="//sheet" position="attributes">
        <attribute name="string">Site</attribute>
      </xpath>

      <xpath expr="//field[@name='user_id']" position="attributes">
        <attribute name="string">Site Manager</attribute>
      </xpath>

      <xpath expr="//field[@name='message_follower_ids']" position="attributes">
        <attribute name="help">Follow this Site to automatically track the events associated to
          tasks and issues of this site.</attribute>
      </xpath>

      <xpath expr="//field[@name='name']" position="attributes">
        <attribute name="placeholder">e.g. Office Party (Site)</attribute>
      </xpath>

    </field>
  </record>

  <record id="project_view_tree_replace_projects_to_sites" model="ir.ui.view">
    <field name="name">project.project.tree.rename.sites</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.view_project" />
    <field name="arch" type="xml">
      <xpath expr="//tree" position="replace">
        <tree decoration-muted="active == False" string="Sites" multi_edit="1" sample="1"
          default_order="sequence, name, id">
          <field name="sequence" optional="show" widget="handle" />
          <field name="name" invisible="1" />
          <field name="message_needaction" invisible="1" />
          <field name="name" invisible="1" />
          <field name="active" invisible="1" />
          <field name="is_favorite" nolabel="1" width="1" widget="boolean_favorite" />
          <field name="display_name" string="Name" class="fw-bold" />
          <field name="partner_id" optional="show" string="Customer" />
          <field name="privacy_visibility" optional="hide" />
          <field name="company_id" optional="show" groups="base.group_multi_company"
            options="{'no_create': True, 'no_create': True}" />
          <field name="company_id" invisible="1" />
          <field name="analytic_account_id" optional="hide"
            groups="analytic.group_analytic_accounting" />
          <field name="date_start" string="Start Date" widget="daterange"
            options="{'related_end_date': 'date'}" />
          <field name="date" string="End Date" widget="daterange"
            options="{'related_start_date': 'date_start'}" />
          <field name="user_id" optional="show" string="Site Manager" widget="many2one_avatar_user"
            options="{'no_open':True, 'no_create': True, 'no_create_edit': True}" />
          <field name="last_update_color" invisible="1" />
          <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"
            optional="hide" />
          <field name="last_update_status" string="Status" nolabel="1" optional="show"
            widget="status_with_color"
            options="{'color_field': 'last_update_color', 'hide_label': True}" />
          <field name="stage_id" options="{'no_open': True}" optional="show" />
        </tree>
      </xpath>
    </field>
  </record>

  <record id="project.open_view_project_all" model="ir.actions.act_window">
    <field name="name">Sites</field>
    <field name="res_model">project.project</field>
    <field name="domain">[]</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="view_id" ref="project.view_project_kanban" />
    <field name="search_view_id" ref="project.view_project_project_filter" />
    <field name="target">main</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        No sites found. Let's create one!
      </p>
      <p>
        Create sites to organize your tasks. Define a different workflow for each site.
      </p>
    </field>
  </record>

  <record id="project.open_view_project_all_group_stage" model="ir.actions.act_window">
    <field name="name">Sites</field>
    <field name="res_model">project.project</field>
    <field name="domain">[]</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="view_id" ref="project.view_project_kanban" />
    <field name="search_view_id" ref="project.view_project_project_filter" />
    <field name="target">main</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        No sites found. Let's create one!
      </p>
      <p>
        Create sites to organize your tasks. Define a different workflow for each site.
      </p>
    </field>
  </record>

  <record id="project.action_view_task" model="ir.actions.act_window">
    <field name="name">Milestones</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        No milestones found. Let's create one!
      </p>
      <p>
        Create milestones to organize your project progress.
      </p>
    </field>
  </record>

  <record id="project.menu_project_management" model="ir.ui.menu">
    <field name="name">Milestones</field>
  </record>


  <record id="project_view_task_form_rename_milestone" model="ir.ui.view">
    <field name="name">project.task.form.rename.milestone</field>
    <field name="model">project.task</field>
    <field name="inherit_id" ref="project.view_task_form2" />
    <field name="arch" type="xml">

      <xpath expr="//form" position="attributes">
        <attribute name="string">Milestone</attribute>
      </xpath>
      <xpath expr="//sheet" position="attributes">
        <attribute name="string">Milestone</attribute>
      </xpath>
      <xpath expr="//field[@name='project_id']" position="attributes">
        <attribute name="string">Site</attribute>
      </xpath>
      <xpath expr="//field[@name='name']" position="attributes">
        <attribute name="placeholder">Milestone Title...</attribute>
      </xpath>

      <xpath expr="//field[@name='description']" position="attributes">
        <attribute name="placeholder">Milestone description...</attribute>
      </xpath>

      <xpath expr="//button[@name='action_open_parent_task']" position="attributes">
        <attribute name="string">Parent Milestone</attribute>
      </xpath>

      <xpath expr="//button[@name='action_recurring_tasks']" position="replace">
        <button name="action_recurring_tasks" type="object"
          attrs="{'invisible': [('recurrence_id', '=', False)]}" class="oe_stat_button"
          groups="project.group_project_recurring_tasks">
          <div class="o_field_widget o_stat_info">
            <span class="o_stat_value">
              <field name="recurring_count" widget="statinfo" nolabel="1" /> Milestones </span>
            <span class="o_stat_text">in Recurrence</span>
          </div>
        </button>
      </xpath>

      <xpath expr="//button[@name='296']" position="replace">
        <button name="296" type="action" class="oe_stat_button" icon="fa-tasks"
          attrs="{'invisible' : ['|', '|', ('allow_subtasks', '=', False), ('id', '=', False), ('subtask_count', '=', 0)]}"
          context="{'default_user_ids': user_ids}">
          <div class="o_field_widget o_stat_info">
            <span class="o_stat_value">
              <field name="subtask_count" widget="statinfo" nolabel="1" />
            </span>
            <span class="o_stat_text">Sub-milestones</span>
          </div>
        </button>
      </xpath>

      <xpath expr="//button[@name='action_open_parent_task']" position="replace">
        <button name="action_open_parent_task" type="object" class="oe_stat_button" icon="fa-tasks"
          attrs="{'invisible': ['|', ('allow_subtasks', '=', False), ('parent_id', '=', False)]}"
          groups="project.group_subtask_project">
          <div class="o_field_widget o_stat_info">
            <span class="o_stat_text">Parent Milestone</span>
          </div>
        </button>
      </xpath>

      <xpath expr="//button[@name='action_open_task']" position="attributes">
        <attribute name="string">View Milestone</attribute>
      </xpath>

      <xpath expr="//page[@name='sub_tasks_page']" position="attributes">
        <attribute name="string">Sub-milestones</attribute>
      </xpath>

      <xpath expr="//field[@name='milestone_id']" position="attributes">
        <attribute name="placeholder">e.g. Product Launch</attribute>
        <attribute name="string">Milestone</attribute>
      </xpath>

      <xpath expr="//button[@name='action_dependent_tasks']" position="replace">
        <button name="action_dependent_tasks" type="object"
          attrs="{'invisible': [('dependent_tasks_count', '=', 0)]}" class="oe_stat_button"
          icon="fa-tasks" groups="project.group_project_task_dependencies">
          <div class="o_field_widget o_stat_info">
            <span class="o_stat_text">Blocking</span>
            <span class="o_stat_value ">
              <field name="dependent_tasks_count" widget="statinfo" nolabel="1" /> Milestones </span>
          </div>
        </button>
      </xpath>

      <xpath expr="//page[@name='sub_tasks_page']//tree//field[@name='milestone_id']"
        position="attributes">
        <attribute name="string">Milestone</attribute>
      </xpath>

      <xpath expr="//page[@name='task_dependencies']//button[@name='action_open_task']"
        position="attributes">
        <attribute name="string">View Milestone</attribute>
      </xpath>

    </field>
  </record>

  <record id="project.project_sharing_project_task_action" model="ir.actions.act_window">
    <field name="name">Project Sharing</field>
    <field name="res_model">project.task</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="search_view_id" ref="project.project_sharing_project_task_view_search" />
    <field name="domain">[('display_project_id', '=', active_id)]</field>
    <field name="context">{'default_project_id': active_id, 'delete': 0, 'active_id_chatter':
      active_id}</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        No milestones found. Let's create one!
      </p>
      <p> Keep track of the progress of your milestones from creation to completion.<br />
        Collaborate efficiently by chatting in real-time or via email. </p>
    </field>
  </record>

  <record id="inherit_task_tree_rename" model="ir.ui.view">
    <field name="name">project.task.tree.rename.milestone</field>
    <field name="model">project.task</field>
    <field name="inherit_id" ref="project.view_task_tree2" />
    <field name="arch" type="xml">
      <xpath expr="//tree" position="attributes">
        <attribute name="string">Milestones</attribute>
      </xpath>
      <xpath expr="//field[@name='name']" position="attributes">
        <attribute name="string">Milestone</attribute>
      </xpath>
    </field>
  </record>

  <record id="project.action_view_all_task" model="ir.actions.act_window">
    <field name="name">My Milestones</field>
    <field name="res_model">project.task</field>
    <field name="view_mode">kanban,tree,form,calendar,pivot,graph,activity</field>
    <field name="context">{'search_default_my_tasks': 1, 'search_default_open_tasks': 1, 'all_task':
      0, 'default_user_ids': [(4, uid)]}</field>
    <field name="search_view_id" ref="project.view_task_search_form_extended" />
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        No milestones found. Let's create one!
      </p>
      <p> Organize your milestones by dispatching them across the pipeline.<br /> Collaborate
        efficiently by chatting in real-time or via email. </p>
    </field>
  </record>
</odoo>